<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Drag and drop</title>
    <link rel="stylesheet" th:href="@{/css/main.css}">
</head>
<body>

<div>
    <p>
        <span th:each="entry : ${breadcrumbs}">
            <a th:if="${entry.value == 'Home'}" th:href="@{/}" th:text="${entry.value}"></a>
            <a th:unless="${entry.value == 'Home'}" th:href="@{/(path=${entry.key})}" th:text="${entry.value}"></a>
            <span>/</span>
        </span>
    </p>
</div>
<div th:each="item : ${itemDto}">
    <div th:if="${item.isDir()}">
        <a th:href="@{/(path=${item.path})}" th:text="${item.name}"></a>
        <form th:action="@{/folder/rename}" th:method="PATCH" style="margin: 0;">
            <label for="newFolderName">New name</label>
            <input type="text" id="newFolderName" th:name="newName">
            <input type="hidden" th:name="oldPath" th:value="${item.fullPath}">
            <button type="submit">Переименовать</button>
        </form>
        <form th:action="@{/folder/delete}" th:method="DELETE" style="margin: 0;">
            <input type="hidden" th:name="fullPath" th:value="${item.fullPath}">
            <button type="submit">Удалить</button>
        </form>
    </div>
    <div th:unless="${item.isDir()}" style="display: flex; justify-content: space-between; align-items: center;">
        <p th:text="${item.name}" style="margin: 0;">Text</p>

        <form th:action="@{/file/download}" th:method="GET" style="margin: 0;">
            <input type="hidden" th:name="name" th:value="${item.name}"/>
            <input type="hidden" th:name="path" th:value="${item.fullPath}"/>
            <button type="submit">Скачать</button>
        </form>
        <form th:action="@{/file/rename}" th:method="PATCH" style="margin: 0;">
            <label for="newFileName">New name</label>
            <input type="text" id="newFileName" th:name="newPath">
            <input type="hidden" th:name="oldPath" th:value="${item.fullPath}">
            <button type="submit">Переименовать</button>
        </form>

        <form th:action="@{/file/delete}" th:method="DELETE" style="margin: 0;">
            <input type="hidden" th:name="fullPath" th:value="${item.fullPath}">
            <button type="submit">Удалить</button>
        </form>
    </div>

</div>

    <form th:method="POST" th:action="@{/folder/add}">
        <label for="folderName">Folder new name</label>
        <input type="hidden" th:name="folderLocation" th:value="${url}"/>
        <input type="hidden" th:name="ownerId" th:value="${owner.id}"/>
        <input type="text" id="folderName" th:name="name">
        <button type="submit">Add new folder!</button>
    </form>

<form th:method="GET" th:action="@{/search/}">
    <label for="query"></label>
    <input type="text" id="query" name="query">
    <button type="submit">Search</button>
</form>


<form th:method="POST" th:action="@{/file/upload}" enctype="multipart/form-data">

    <div class="drop-zone">
        <span class="drop-zone__prompt">Drop file here or click to upload</span>
        <input type="file" name="file" class="drop-zone__input">
    </div>
    <input type="hidden" th:value="${url}" th:name="path"/>
    <input type="hidden" th:value="${owner.id}" th:name="ownerId"/>
    <input type="submit" value="post"/>
</form>


<script th:src="@{/js/main.js}"></script>
</body>
</html>